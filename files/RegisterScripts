var AuthenticationValidationService=function(){var n=function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},t=function(n){return!!n&&n.length>5&&n.length<17};return{validateEmail:n,validatePassword:t}}(),RegisterService=function(){var r=tycommon.configuration.BasePath,o=tycommon.configuration.MobileServiceBasePath,i={REGISTER_SUBMIT:r+"/Authentication/Register",THIRD_PARTY_REGISTER_SUBMIT:"register",PROTECTION_OF_PERSONAL_DATA_CONTRACT:r+"/Contract/ProtectionOfPersonalData",TERMS_OF_USE_CONTRACT:r+"/Contract/TermsOfUse",MARKETING_EMAILS_CONTRACT:r+"/Contract/MarketingEmailsAuthorized",LOGIN_SUBMIT:r+"/Authentication/Login"},n={INVALID_EMAIL:"Lütfen email adresinizi giriniz.",INVALID_PASSWORD:"Şifreniz 6-16 karakter arasında olmalıdır.",INVALID_MEMBERSHIP_POLICY:"Lütfen Üyelik koşullarını kabul ediniz.",PASSWORD_REQUIRED:"Lütfen şifre giriniz.",GENERIC_ERROR:"Bir şeyler ters gitti, lütfen tekrar deneyiniz."},f=function(){$("#errorBox").fadeOut("fast");$("#errorBox").html("")},t=function(n){$("#errorBox").fadeIn("fast");$("#errorBox").html(n)},s=function(t){var r=$(t),i;return AuthenticationValidationService.validateEmail(r.find("input.email").val())?(i=r.find("input.password").val(),!i||i.length===0)?{isSuccess:!1,messageHtml:n.PASSWORD_REQUIRED}:AuthenticationValidationService.validatePassword(i)?r.find("input#MemberShipPolicy").val()!=="true"?{isSuccess:!1,messageHtml:n.INVALID_MEMBERSHIP_POLICY}:{isSuccess:!0,messageHtml:""}:{isSuccess:!1,messageHtml:n.INVALID_PASSWORD}:{isSuccess:!1,messageHtml:n.INVALID_EMAIL}},e=function(n,i,r,u,e,o){var c=s(n),h;o=typeof o!="undefined"?o:!1;c.isSuccess?(f(),authenticationLoaderService.show(),h={type:"POST",url:e,data:i,success:function(n){authenticationLoaderService.hide();r(n)},error:function(n){authenticationLoaderService.hide();u(n)}},o?(h.contentType="application/json;",h.dataType="json"):h.xhrFields={withCredentials:!0},$.ajax(h)):(t(c.messageHtml),authenticationLoaderService.hide())},h=function(r){var u=$(r).serialize();return e(r,u,function(i){var r,u;i?i.OperationResult?(r=UrlService.updateQueryStringParameter(document.location.href,"e","login"),window.location.href=r):(u=i.ErrorMessages&&i.ErrorMessages.length>0?i.ErrorMessages[0]:n.GENERIC_ERROR,t(u)):t("")},function(){t(n.GENERIC_ERROR)},i.REGISTER_SUBMIT),!1},c=function(){return{Email:document.getElementById("Email").value,Gender:document.getElementById("GenderTypeId").value,MarketingEmailsAuthorized:document.getElementById("MarketingEmailsAuthorized").value,Password:document.getElementById("Password").value,ThirdPartySiteId:document.getElementById("ThirdPartySiteId").value,ThirdPartyUserId:document.getElementById("ThirdPartyUserId").value}},l=function(n,t){SocialLoginService.matchThirdPartyUser(n.ThirdPartySiteId,n.ThirdPartyUserId,n.Email,t,function(){document.location.reload()})},a=function(r){var u=c(),f=o+i.THIRD_PARTY_REGISTER_SUBMIT;return e(r,JSON.stringify(u),function(r){if(!!r&&r.RequestError===0){var f="email="+u.Email+"&password="+u.Password;$.ajax({type:"POST",xhrFields:{withCredentials:!0},url:i.LOGIN_SUBMIT,data:f,success:function(i){i&&i.OperationResult?l(u,i.TokenResponse.AccessToken):t(n.GENERIC_ERROR)},error:function(){t(n.GENERIC_ERROR)}})}},function(){t(n.GENERIC_ERROR)},f,!0),!1},v=function(){$("#registerSection").hide();$("#registerFooter").hide()},y=function(){$("#registerSection").show();$("#registerFooter").show();$(".contract-container").hide();$("#returnToRegisterFooter").hide()},p=function(n){$(".contract-container").html(n);$(".contract-container").show();$(".contract-container").height(460);$("#returnToRegisterFooter").show()},u=function(n){$.ajax({type:"GET",url:n,data:null,success:function(n){v();p(n)},error:function(){}})},w=function(){u(i.MARKETING_EMAILS_CONTRACT)},b=function(){u(i.TERMS_OF_USE_CONTRACT)},k=function(){u(i.PROTECTION_OF_PERSONAL_DATA_CONTRACT)};return{submit:h,hideErrors:f,showMarketingEmailsAuthorizedContract:w,showTermsOfUseContract:b,showProtectionOfPersonalDataContract:k,showRegisterForm:y,submitThirdParty:a}}();$(document).ready(function(){$(document).on("keypress",function(n){$(".register").is(":visible")&&n.which===13&&RegisterService.submit(document.getElementById("registerForm"))});$("input.email, input.password").focus(function(){RegisterService.hideErrors()});$(".gender-type-button").click(function(){var n=$(this).attr("data-gender-id");$(".gender-type-button").removeClass("active");$(this).addClass("active");$("#genderTypeId").val(n)});$(".marketing-emails .checkbox-label").click(function(){var n=$(this);n.hasClass("checked")?(n.removeClass("checked"),$("#MarketingEmailsAuthorized").val("false")):(n.addClass("checked"),$("#MarketingEmailsAuthorized").val("true"))});$(".membership-policy .checkbox-label").click(function(){var n=$(this);n.hasClass("checked")?(n.removeClass("checked"),$("#MemberShipPolicy").val("false")):(n.addClass("checked"),$("#MemberShipPolicy").val("true"))})})